<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <style>
        .logo {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 150px; /* Adjust size as needed */
            padding-bottom: 20px;
        }
        .box {
            max-width: 500px;
            margin: 0 auto;
            padding: 40px;
        }
        .title {
            text-align: center;
            font-size: 24px;
            padding-bottom: 20px;
        }
        .button {
            margin-top: 20px;
            width: 100%;
        }
    </style>
</head>
<body>
    <section class="section">
        <div class="container">
            <!-- Company Logo -->
            <img src="/static/images/logo.png" alt="Company Logo" class="logo">

            <!-- Page Title -->
            <h1 class="title">Reset Password</h1>

            <!-- Reset Password Form -->
            <div class="box">
                <form method="POST" action="{{ url_for('reset_password', email=email) }}">
                    <!-- Hidden Email Field -->
                    <input type="hidden" name="email" value="{{ email }}">

                    <!-- OTP Field -->
                    <div class="field">
                        <label for="otp" class="label">Enter OTP:</label>
                        <div class="control">
                            <input class="input" type="text" id="otp" name="otp" required>
                        </div>
                    </div>

                    <!-- New Password Field -->
                    <div class="field">
                        <label for="new_password" class="label">Enter New Password:</label>
                        <div class="control">
                            <!--<input class="input" type="password" id="new_password" name="new_password" required>-->

                            <input class="input" type="password" id="new_password" name="new_password" required pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" title="Password must be at least 8 characters long, contain letters, numbers, and at least one special character.">
<p id="error-message" style="color: red; display: none;">
    Password must be at least 8 characters long, contain letters, numbers, and at least one special character.</p>

<script>
    const passwordField = document.getElementById("new_password");
    const errorMessage = document.getElementById("error-message");

    passwordField.addEventListener("input", () => {
        if (passwordField.validity.patternMismatch) {
            errorMessage.style.display = "block";
        } else {
            errorMessage.style.display = "none";
        }
    });
</script>

                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="field">
                        <div class="control">
                            <button type="submit" class="button is-primary">Reset Password</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
</body>
</html>
